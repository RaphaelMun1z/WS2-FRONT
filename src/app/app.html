<header class="w-full bg-white shadow-sm">
  <div class="max-w-7xl mx-auto px-6 py-6 flex justify-center items-center">
    <img
      src="/Spondeo-logo.webp"
      alt="Logotipo da Spondeo"
      width="160"
      height="48"
      class="h-10 md:h-12 object-contain"
    />
  </div>
</header>

<main class="app-container">
  <section class="search-hero" aria-labelledby="hero-title">
    <div class="search-hero-content">
      <div class="search-hero-header">
        <h1 id="hero-title" class="search-title">Encontre oportunidades na Spondeo</h1>
        <p class="search-subtitle">Descubra vagas alinhadas ao seu perfil em poucos segundos.</p>
      </div>

      <form class="search-form" role="search" aria-label="Buscar vagas na Spondeo">
        <div class="search-inputs">
          <div class="form-group search-main">
            <label class="form-label" for="search-keyword"> Cargo ou palavra-chave </label>

            <div class="input-wrapper search-autocomplete">
              <span class="input-icon">
                <i class="ph ph-magnifying-glass"></i>
              </span>

              <input
                type="text"
                class="form-input"
                placeholder="Buscar vagas..."
                [ngModel]="searchTerm()"
                (ngModelChange)="onSearchInput($event)"
              />

              <div
                class="suggestions-dropdown"
                *ngIf="showSuggestions() && filteredSuggestions().length"
              >
                <div
                  class="suggestion-item"
                  *ngFor="let suggestion of filteredSuggestions()"
                  (click)="selectSuggestion(suggestion)"
                >
                  <i class="ph ph-magnifying-glass suggestion-icon"></i>
                  {{ suggestion }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </section>

  <div class="mobile-filter-toggle">
    <button class="floating-filter-btn" (click)="toggleMobileFilters()" aria-label="Abrir filtros">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="22"
        height="22"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <line x1="4" y1="6" x2="20" y2="6"></line>
        <circle cx="9" cy="6" r="2"></circle>
        <line x1="4" y1="12" x2="20" y2="12"></line>
        <circle cx="15" cy="12" r="2"></circle>
        <line x1="4" y1="18" x2="20" y2="18"></line>
        <circle cx="11" cy="18" r="2"></circle>
      </svg>
    </button>
  </div>

  <div class="filter-overlay" *ngIf="showMobileFilters()" (click)="closeMobileFilters()"></div>

  <div class="main-grid">
    <aside
      class="filters"
      [class.show-mobile]="showMobileFilters()"
      aria-labelledby="filters-title"
    >
      <div class="filter-header">
        <h2 id="filters-title" class="filter-title">Filtros</h2>

        <div class="header-actions">
          <button class="clear-filters" (click)="resetFilters()" *ngIf="isFiltering()">
            Limpar filtros
          </button>

          <button class="close-mobile-filters" (click)="closeMobileFilters()">‚úï</button>
        </div>
      </div>

      <fieldset class="filter-group">
        <legend class="filter-legend">Modalidade</legend>

        <label class="radio-item">
          <input
            type="radio"
            name="mod"
            [value]="'TODAS'"
            [ngModel]="selectedModalidade()"
            (ngModelChange)="onModalidadeChange($event)"
          />
          <span class="custom-radio"></span> Todas
        </label>

        <label class="radio-item">
          <input
            type="radio"
            name="mod"
            [value]="'Home Office'"
            [ngModel]="selectedModalidade()"
            (ngModelChange)="onModalidadeChange($event)"
          />
          <span class="custom-radio"></span> Remoto
        </label>

        <label class="radio-item">
          <input
            type="radio"
            name="mod"
            [value]="'H√≠brido'"
            [ngModel]="selectedModalidade()"
            (ngModelChange)="onModalidadeChange($event)"
          />
          <span class="custom-radio"></span> H√≠brido
        </label>

        <label class="radio-item">
          <input
            type="radio"
            name="mod"
            [value]="'Presencial'"
            [ngModel]="selectedModalidade()"
            (ngModelChange)="onModalidadeChange($event)"
          />
          <span class="custom-radio"></span> Presencial
        </label>
      </fieldset>

      <fieldset class="filter-group">
        <legend class="filter-legend">Regime</legend>

        <label class="radio-item">
          <input
            type="radio"
            name="reg"
            [value]="'TODOS'"
            [ngModel]="selectedRegime()"
            (ngModelChange)="onRegimeChange($event)"
          />
          <span class="custom-radio"></span> Qualquer
        </label>

        <label class="radio-item">
          <input
            type="radio"
            name="reg"
            [value]="'CLT'"
            [ngModel]="selectedRegime()"
            (ngModelChange)="onRegimeChange($event)"
          />
          <span class="custom-radio"></span> CLT
        </label>

        <label class="radio-item">
          <input
            type="radio"
            name="reg"
            [value]="'PJ'"
            [ngModel]="selectedRegime()"
            (ngModelChange)="onRegimeChange($event)"
          />
          <span class="custom-radio"></span> PJ
        </label>

        <label class="radio-item">
          <input
            type="radio"
            name="reg"
            [value]="'Est√°gio'"
            [ngModel]="selectedRegime()"
            (ngModelChange)="onRegimeChange($event)"
          />
          <span class="custom-radio"></span> Est√°gio
        </label>
      </fieldset>

      <div class="filter-group">
        <label class="filter-legend" for="fonte-select">Fonte</label>
        <select
          id="fonte-select"
          class="filter-select"
          [ngModel]="selectedFonte()"
          (ngModelChange)="onFonteChange($event)"
        >
          <option value="TODAS">Todas</option>
          <option value="Indeed">Indeed</option>
          <option value="Glassdoor">Glassdoor</option>
          <option value="Catho">Catho</option>
          <option value="Infojobs">Infojobs</option>
          <option value="Nerdin">Nerdin</option>
        </select>
      </div>
    </aside>

    <section class="job-list-section">
      <div class="results-header">
        <div class="results-count">
          Mostrando <strong>{{ totalElements() }}</strong> vagas
          <span *ngIf="isLoading()" class="loading-badge">Buscando...</span>
        </div>
      </div>

      <div class="job-list-grid">
        @if (isLoading() && vagas().length === 0) {
          <div class="skeleton-card" *ngFor="let i of [1, 2, 3, 4]"></div>
        } @else {
          @for (vaga of vagas(); track vaga.id) {
            <app-job-card [vaga]="vaga"></app-job-card>
          } @empty {
            <div class="empty-state">
              <div class="empty-emoji">üîç</div>
              <h3>Nenhuma vaga encontrada</h3>
              <button class="btn-toggle-filters" (click)="resetFilters()">Limpar filtros</button>
            </div>
          }
        }
      </div>
    </section>
  </div>
</main>

<footer class="site-footer">
  <div class="footer-top">
    <div class="footer-grid">
      <div class="footer-brand">
        <img
          src="/Spondeo-logo.webp"
          alt="Logotipo da Spondeo"
          width="140"
          height="42"
          loading="lazy"
          class="footer-logo"
        />
        <p>
          Conectando os melhores talentos √†s oportunidades mais alinhadas do mercado, de forma
          r√°pida e inteligente.
        </p>
      </div>

      <div class="footer-dev">
        <a
          href="https://raphaelmun1z.github.io/Angular-Portfolio/"
          target=""
          class="footer-author"
          aria-label="Conhe√ßa o desenvolvedor Raphael Muniz"
        >
          <span>Desenvolvido por</span>
          <img
            src="rm-logo.webp"
            alt="Logotipo Autoral Raphael Muniz"
            width="140"
            height="40"
            loading="lazy"
            class="author-logo"
          />
        </a>
      </div>
    </div>
  </div>

  <div class="footer-bottom">
    <p>&copy; 2026 Spondeo. Todos os direitos reservados.</p>
  </div>
</footer>
